<!DOCTYPE html>
<html lang="zh-TW">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CNSåœ–è™Ÿç·´ç¿’é¡Œåº« v1.2</title>
    <style>
        :root {
            --accent: #2980b9;
            --mask-color: #bdc3c7;
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: "Microsoft JhengHei", sans-serif;
            background: linear-gradient(135deg, #667eea, #764ba2);
            min-height: 100vh;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }

        header {
            background: linear-gradient(135deg, #2c3e50, #3498db);
            color: white;
            padding: 12px;
            text-align: center;
            position: sticky;
            top: 0;
            z-index: 100;
        }

        h1 {
            font-size: 1.2rem;
        }

        .subtitle {
            font-size: 0.75rem;
            opacity: 0.8;
            margin-top: 4px;
        }

        .controls {
            padding: 8px;
            border-bottom: 1px solid #ddd;
            background: #fafafa;
            position: sticky;
            top: 52px;
            z-index: 99;
        }

        .search-box {
            width: 100%;
            padding: 8px 12px;
            margin-bottom: 8px;
            border: 1px solid #ddd;
            border-radius: 20px;
            font-size: 14px;
        }

        .filter-scroll {
            overflow-x: auto;
            white-space: nowrap;
            -webkit-overflow-scrolling: touch;
            scrollbar-width: none;
            padding-bottom: 4px;
        }

        .filter-scroll::-webkit-scrollbar {
            display: none;
        }

        .filter-group {
            display: inline-flex;
            gap: 6px;
        }

        .btn {
            padding: 6px 12px;
            border: 1px solid #ddd;
            border-radius: 15px;
            background: white;
            cursor: pointer;
            font-size: 12px;
            white-space: nowrap;
            flex-shrink: 0;
        }

        .btn.active {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            border-color: transparent;
        }

        .btn-toggle {
            background: #e67e22;
            color: white;
            border: none;
        }

        .quiz-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 8px;
            padding: 8px;
            flex: 1;
        }

        .quiz-card {
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
            overflow: hidden;
            cursor: pointer;
        }

        .card-header {
            background: #ecf0f1;
            padding: 4px 6px;
            font-size: 0.65rem;
            color: #666;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .star-btn {
            font-size: 1rem;
            color: #bdc3c7;
            cursor: pointer;
            transition: color 0.2s;
            line-height: 1;
        }

        .star-btn.active {
            color: #f1c40f;
        }

        .card-body {
            padding: 8px;
            text-align: center;
            min-height: 50px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: #fff;
        }

        .card-body img {
            max-width: 100%;
            max-height: 40px;
            object-fit: contain;
        }

        .card-body .text-symbol {
            font-size: 1rem;
            font-weight: bold;
            color: var(--accent);
        }

        .card-answer {
            padding: 8px 4px;
            background: var(--mask-color);
            color: transparent;
            text-align: center;
            font-size: 0.75rem;
            font-weight: bold;
            min-height: 32px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .quiz-card.revealed .card-answer {
            background: linear-gradient(135deg, #2ecc71, #27ae60);
            color: white;
        }

        @media (min-width: 600px) {
            .quiz-grid {
                grid-template-columns: repeat(4, 1fr);
            }
        }

        @media (max-width: 400px) {
            .quiz-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }
    </style>
</head>

<body>
    <div class="container">
        <header>
            <h1>CNSåœ–è™Ÿç·´ç¿’é¡Œåº«</h1>
            <div class="subtitle" id="stats">è¼‰å…¥ä¸­...</div>
        </header>
        <div class="controls">
            <input type="text" class="search-box" id="searchInput" placeholder="ğŸ” æœå°‹...">
            <div class="filter-scroll">
                <div class="filter-group">
                    <button class="btn active" data-filter="all">å…¨éƒ¨</button>
                    <button class="btn" data-filter="CNS">CNSåœ–è™Ÿ</button>
                    <button class="btn" data-filter="ARCH">å»ºç¯‰ç¬¦è™Ÿ</button>
                    <button class="btn" data-filter="STRUCT">çµæ§‹ç¬¦è™Ÿ</button>
                    <button class="btn" data-filter="E">é›»æ°£è¨­å‚™</button>
                    <button class="btn" data-filter="P">çµ¦æ’æ°´</button>
                    <button class="btn" data-filter="M">ç©ºèª¿æ©Ÿæ¢°</button>
                    <button class="btn" data-filter="T">é›»ä¿¡å¼±é›»</button>
                    <button class="btn" data-filter="FIRE">æ¶ˆé˜²è¨­å‚™</button>
                    <button class="btn" data-filter="MAT">æ§‹é€ æè³ª</button>
                    <button class="btn" data-filter="unfamiliar">â­ ä¸ç†Ÿæ¨™è¨˜</button>
                    <button class="btn btn-toggle" onclick="toggleAll()">ğŸ‘ï¸</button>
                </div>
            </div>
        </div>
        <div class="quiz-grid" id="quizGrid"></div>
    </div>

    <script>
        const db = [
            // === CNS åœ–è™Ÿä»£è™Ÿ (CNS_13) ===
            { c: "CNS", q: "ID", d: "åœ–è™Ÿ", a: "å®¤å…§è£ä¿®åœ–" },
            { c: "CNS", q: "A", d: "åœ–è™Ÿ", a: "å»ºç¯‰åœ–" },
            { c: "CNS", q: "S", d: "åœ–è™Ÿ", a: "çµæ§‹åœ–" },
            { c: "CNS", q: "F", d: "åœ–è™Ÿ", a: "æ¶ˆé˜²è¨­å‚™åœ–" },
            { c: "CNS", q: "E", d: "åœ–è™Ÿ", a: "é›»æ°£è¨­å‚™åœ–" },
            { c: "CNS", q: "P", d: "åœ–è™Ÿ", a: "çµ¦æ’æ°´è¡›ç”Ÿè¨­å‚™åœ–" },
            { c: "CNS", q: "M", d: "åœ–è™Ÿ", a: "ç©ºèª¿åŠæ©Ÿæ¢°è¨­å‚™åœ–" },
            { c: "CNS", q: "L", d: "åœ–è™Ÿ", a: "ç’°å¢ƒæ™¯è§€æ¤æ ½åœ–" },
            { c: "CNS", q: "W", d: "åœ–è™Ÿ", a: "æ±™æ°´è™•ç†è¨­æ–½åœ–" },
            { c: "CNS", q: "G", d: "åœ–è™Ÿ", a: "ç“¦æ–¯è¨­å‚™åœ–" },

            // === å¸¸ç”¨ç¬¦è™Ÿ (CNS_15) ===
            // å°ºåº¦åŠä½ç½®
            { c: "ARCH", q: "DÂ·d", d: "ç¬¦è™Ÿ", a: "ç›´å¾‘" },
            { c: "ARCH", q: "RÂ·r", d: "ç¬¦è™Ÿ", a: "åŠå¾‘" },
            { c: "ARCH", q: "W", d: "å°ºåº¦", a: "å¯¬åº¦" },
            { c: "ARCH", q: "L", d: "å°ºåº¦", a: "é•·åº¦" },
            { c: "ARCH", q: "D", d: "å°ºåº¦", a: "æ·±åº¦" },
            { c: "ARCH", q: "H", d: "å°ºåº¦", a: "é«˜åº¦" },
            { c: "ARCH", q: "t", d: "å°ºåº¦", a: "åšåº¦" },
            { c: "ARCH", q: "@", d: "ç¬¦è™Ÿ", a: "é–“éš”" },
            { c: "ARCH", q: "C.C.", d: "ç¬¦è™Ÿ", a: "ä¸­å¿ƒé–“éš”" },
            { c: "ARCH", q: "â„„", d: "ç¬¦è™Ÿ", a: "ä¸­å¿ƒç·š" },
            { c: "ARCH", q: "BM", d: "ç¬¦è™Ÿ", a: "æ°´æº–é»" },
            { c: "ARCH", q: "HL", d: "ç·šæ¢", a: "æ°´å¹³ç·š" },
            { c: "ARCH", q: "VL", d: "ç·šæ¢", a: "å‚ç›´ç·š" },
            { c: "ARCH", q: "GL", d: "ç·šæ¢", a: "åœ°ç›¤ç·š" },
            { c: "ARCH", q: "WL", d: "ç·šæ¢", a: "ç‰†é¢ç·š" },
            { c: "ARCH", q: "CL", d: "ç·šæ¢", a: "å¤©èŠ±æ¿ç·š" },
            { c: "ARCH", q: "1F", d: "æ¨“å±¤", a: "ä¸€æ¨“åœ°æ¿é¢" },
            { c: "ARCH", q: "2F", d: "æ¨“å±¤", a: "äºŒæ¨“åœ°æ¿é¢" },
            { c: "ARCH", q: "B1", d: "æ¨“å±¤", a: "åœ°ä¸‹ä¸€å±¤" },
            { c: "ARCH", q: "B2", d: "æ¨“å±¤", a: "åœ°ä¸‹äºŒå±¤" },
            { c: "ARCH", q: "FL", d: "ç·šæ¢", a: "åœ°æ¿é¢ç·š" },
            { c: "ARCH", q: "FFL", d: "ç·šæ¢", a: "åœ°æ¿è£é£¾é¢ç·š" },
            { c: "ARCH", q: "PH", d: "æ¨“å±¤", a: "å±‹é ‚çªå‡ºç‰©" },
            { c: "ARCH", q: "RF", d: "æ¨“å±¤", a: "å±‹é ‚" },
            // é–€çª—
            { c: "ARCH", q: "D", d: "é–€çª—", a: "é–€" },
            { c: "ARCH", q: "W", d: "é–€çª—", a: "çª—" },
            { c: "ARCH", q: "DW", d: "é–€çª—", a: "é–€é€£çª—" },
            // é‹¼æ–™
            { c: "ARCH", q: "W", d: "é‹¼æ–™", a: "å¯¬ç·£Iå‹é‹¼" },
            { c: "ARCH", q: "S", d: "é‹¼æ–™", a: "æ¨™æº–Iå‹é‹¼" },
            { c: "ARCH", q: "H", d: "é‹¼æ–™", a: "Hå‹é‹¼" },
            { c: "ARCH", q: "Z", d: "é‹¼æ–™", a: "Zå‹é‹¼" },
            { c: "ARCH", q: "T", d: "é‹¼æ–™", a: "Tå‹é‹¼" },
            { c: "ARCH", q: "ã„ˆ", d: "é‹¼æ–™", a: "æ§½å‹é‹¼" },
            { c: "ARCH", q: "C", d: "é‹¼æ–™", a: "è¼•å‹é‹¼" },
            { c: "ARCH", q: "L", d: "é‹¼æ–™", a: "è§’é‹¼" },
            { c: "ARCH", q: "B", d: "é‹¼æ–™", a: "èºæ “" },
            { c: "ARCH", q: "R", d: "é‹¼æ–™", a: "é‰šé‡˜" },
            { c: "ARCH", q: "FB", d: "ææ–™", a: "æ‰é‹¼" },
            { c: "ARCH", q: "PL", d: "ææ–™", a: "é‹¼æ¿" },
            { c: "ARCH", q: "GIP", d: "ææ–™", a: "éé‹…é‹¼ç®¡" },
            { c: "ARCH", q: "CIP", d: "ææ–™", a: "é‘„éµç®¡" },
            { c: "ARCH", q: "SSP", d: "ææ–™", a: "ä¸éŠ¹é‹¼ç®¡" },
            { c: "ARCH", q: "RCP", d: "ææ–™", a: "é‹¼ç­‹æ··å‡åœŸç®¡" },
            { c: "ARCH", q: "PVCP", d: "ææ–™", a: "èšæ°¯ä¹™çƒ¯ç®¡" },
            { c: "ARCH", q: "GIS", d: "ææ–™", a: "éé‹…é‹¼æ¿" },
            { c: "ARCH", q: "#", d: "ç¬¦è™Ÿ", a: "è¦æ ¼è™Ÿç¢¼" },
            { c: "ARCH", q: "Ã˜", d: "ç¬¦è™Ÿ", a: "ç›´å¾‘" },
            // å‚ç›´äº¤é€š
            { c: "ARCH", q: "UP", d: "æ–¹å‘", a: "ä¸Š(æ¨“æ¢¯ã€å¡é“)" },
            { c: "ARCH", q: "DN", d: "æ–¹å‘", a: "ä¸‹(æ¨“æ¢¯ã€å¡é“)" },
            { c: "ARCH", q: "R", d: "æ¨“æ¢¯", a: "æ¨“æ¢¯ç´šé«˜" },
            { c: "ARCH", q: "T", d: "æ¨“æ¢¯", a: "æ¨“æ¢¯ç´šæ·±" },
            { c: "ARCH", q: "ELEV", d: "è¨­å‚™", a: "æ˜‡é™æ©Ÿ" },
            { c: "ARCH", q: "ESCA", d: "è¨­å‚™", a: "è‡ªå‹•æ¨“æ¢¯(é›»æ‰¶æ¢¯)" },

            // === çµæ§‹åœ–ç¬¦è™Ÿ (CNS_21) ===
            // æ§‹æ
            { c: "STRUCT", q: "C", d: "æ§‹æ", a: "æŸ±" },
            { c: "STRUCT", q: "F", d: "æ§‹æ", a: "åŸºè…³" },
            { c: "STRUCT", q: "FGÂ·FB", d: "æ§‹æ", a: "åœ°æ¢" },
            { c: "STRUCT", q: "GÂ·B", d: "æ§‹æ", a: "æ§‹æ¶æ¢(å¤§æ¨‘)" },
            { c: "STRUCT", q: "b", d: "æ§‹æ", a: "éæ§‹æ¶æ¢(å°æ¨‘)" },
            { c: "STRUCT", q: "TGÂ·TB", d: "æ§‹æ", a: "æ§‹æ¶ç¹«æ¢(tie beam)" },
            { c: "STRUCT", q: "Tb", d: "æ§‹æ", a: "éæ§‹æ¶ç¹«æ¢(tie beam)" },
            { c: "STRUCT", q: "CGÂ·CB", d: "æ§‹æ", a: "æ§‹æ¶æ‡¸è‡‚æ¢(cantilever)" },
            { c: "STRUCT", q: "Cb", d: "æ§‹æ", a: "éæ§‹æ¶æ‡¸è‡‚æ¢" },
            { c: "STRUCT", q: "S", d: "æ§‹æ", a: "æ¿" },
            { c: "STRUCT", q: "CS", d: "æ§‹æ", a: "æ‡¸è‡‚æ¿" },
            { c: "STRUCT", q: "W", d: "æ§‹æ", a: "ç‰†" },
            { c: "STRUCT", q: "WB", d: "æ§‹æ", a: "ç‰†æ¢" },
            { c: "STRUCT", q: "SS", d: "æ§‹æ", a: "æ¨“æ¢¯æ¢¯æ¿" },
            { c: "STRUCT", q: "FS", d: "æ§‹æ", a: "åŸºç¤æ¿" },
            { c: "STRUCT", q: "BW", d: "æ§‹æ", a: "æ‰¿é‡ç‰†" },
            { c: "STRUCT", q: "SW", d: "æ§‹æ", a: "å‰ªåŠ›ç‰†" },
            { c: "STRUCT", q: "T", d: "æ§‹æ", a: "æ¡æ¶" },
            { c: "STRUCT", q: "P", d: "æ§‹æ", a: "æ¡æ¢" },
            { c: "STRUCT", q: "J", d: "æ§‹æ", a: "æ¤½æ¤½" },
            { c: "STRUCT", q: "UU", d: "æ§‹æ", a: "ä¸Šå¼¦æ§‹æ" },
            { c: "STRUCT", q: "LL", d: "æ§‹æ", a: "ä¸‹å¼¦æ§‹æ" },
            { c: "STRUCT", q: "UL", d: "æ§‹æ", a: "è…¹æ§‹æ" },
            // å±¤åˆ¥
            { c: "STRUCT", q: "R", d: "å±¤åˆ¥", a: "å±‹é ‚" },
            { c: "STRUCT", q: "P", d: "å±¤åˆ¥", a: "å±‹é ‚çªå‡ºç‰©" },
            { c: "STRUCT", q: "B", d: "å±¤åˆ¥", a: "åœ°ä¸‹å®¤" },
            { c: "STRUCT", q: "M", d: "å±¤åˆ¥", a: "å¤¾å±¤" },
            // æ§‹é€ 
            { c: "STRUCT", q: "RC", d: "æ§‹é€ ", a: "é‹¼ç­‹æ··å‡åœŸé€ " },
            { c: "STRUCT", q: "S", d: "æ§‹é€ ", a: "é‹¼æ§‹é€ " },
            { c: "STRUCT", q: "SRC", d: "æ§‹é€ ", a: "é‹¼éª¨é‹¼ç­‹æ··å‡åœŸé€ " },
            { c: "STRUCT", q: "B", d: "æ§‹é€ ", a: "ç£šæ§‹é€ " },
            { c: "STRUCT", q: "RB", d: "æ§‹é€ ", a: "åŠ å¼·ç£šé€ " },
            { c: "STRUCT", q: "W", d: "æ§‹é€ ", a: "æœ¨æ§‹é€ " },

            // é›»æ°£è¨­å‚™ (Elect) - å·²é©—è­‰
            { c: "E", img: "Elect_01.png", d: "é–‹é—œ", a: "å–®æ¥µé–‹é—œ" },
            { c: "E", img: "Elect_02.png", d: "é–‹é—œ", a: "é›™æ¥µé–‹é—œ" },
            { c: "E", img: "Elect_03.png", d: "é–‹é—œ", a: "ä¸‰è·¯é–‹é—œ" },
            { c: "E", img: "Elect_04.png", d: "é–‹é—œ", a: "å››è·¯é–‹é—œ" },
            { c: "E", img: "Elect_05.png", d: "é–‹é—œ", a: "é‘°åŒ™æ“ä½œé–‹é—œ" },
            { c: "E", img: "Elect_06.png", d: "é–‹é—œ", a: "é–‹é—œåŠæ¨™ç¤ºç‡ˆ" },
            { c: "E", img: "Elect_07.png", d: "é–‹é—œ", a: "å±‹å¤–å‹é–‹é—œé˜²æ°´å‹" },
            { c: "E", img: "Elect_08.png", d: "é–‹é—œ", a: "æ™‚æ§é–‹é—œ" },
            { c: "E", img: "Elect_09.png", d: "æ’åº§", a: "åŸ‹è¨­æ–¼å¹³é ‚æ··å‡åœŸå…§æˆ–ç‰†å…§ç®¡ç·š" },
            { c: "E", img: "Elect_10.png", d: "å°ç·š", a: "åŸ‹è¨­æ–¼åœ°åªæ··å‡åœŸå…§æˆ–ç‰†å…§ç®¡ç·š" },
            { c: "E", img: "Elect_11.png", d: "æ’åº§", a: "æ¥æˆ¶é»" },
            { c: "E", img: "Elect_12.png", d: "æ’åº§", a: "æ¥åœ°" },
            { c: "E", img: "Elect_13.png", d: "æ’åº§", a: "é›»çºœé ­" },
            { c: "E", img: "Elect_14.png", d: "æ’åº§", a: "é›»ç‡ˆç¸½é…é›»ç›¤" },
            { c: "E", img: "Elect_15.png", d: "æ’åº§", a: "å–®é€£æ’åº§" },
            { c: "E", img: "Elect_16.png", d: "å‡ºç·šå£", a: "é›»ç‡ˆåˆ†é›»ç›¤" },
            { c: "E", img: "Elect_17.png", d: "ç‡ˆå…·", a: "é›»ç‡ˆå‹•åŠ›æ··åˆé…é›»ç›¤" },
            { c: "E", img: "Elect_18.png", d: "ç‡ˆå…·", a: "é›»åŠ›ç¸½é…é›»ç›¤" },
            { c: "E", img: "Elect_19.png", d: "ç‡ˆå…·", a: "é›»åŠ›åˆ†é›»ç›¤" },
            { c: "E", img: "Elect_20.png", d: "ç‡ˆå…·", a: "äººå­”" },
            { c: "E", img: "Elect_21.png", d: "ç‡ˆå…·", a: "æ‰‹å­”" },
            { c: "E", img: "Elect_22.png", d: "ç¬¦è™Ÿ", a: "ç™¼é›»æ©Ÿ" },
            { c: "E", img: "Elect_23.png", d: "ç¬¦è™Ÿ", a: "é›»å‹•æ©Ÿ" },
            { c: "E", img: "Elect_24.png", d: "ç¬¦è™Ÿ", a: "é›»ç†±å™¨" },
            { c: "E", img: "Elect_25.png", d: "ç¬¦è™Ÿ", a: "é›»é¢¨æ‰‡" },
            { c: "E", img: "Elect_26.png", d: "é…ç·š", a: "ç™½ç†¾ç‡ˆ" },
            { c: "E", img: "Elect_27.png", d: "é…ç·š", a: "T-BARæ—¥å…‰ç‡ˆ" },
            { c: "E", img: "Elect_28.png", d: "é…ç·š", a: "æ¥ç·šç›’åŠå‡ºç·šå£" },
            { c: "E", img: "Elect_29.png", d: "ç‡ˆå…·", a: "é•·å½¢æ—¥å…‰ç‡ˆ" },
            { c: "E", img: "Elect_30.png", d: "ç‡ˆå…·", a: "æ–¹å½¢æ—¥å…‰ç‡ˆ" },
            { c: "E", img: "Elect_31.png", d: "é–‹é—œ", a: "é›™é€£æ’åº§" },
            { c: "E", img: "Elect_32.png", d: "é–‹é—œ", a: "ä¸‰é€£æ’åº§" },
            { c: "E", img: "Elect_33.png", d: "æ’åº§", a: "å››é€£æ’åº§" },
            { c: "E", img: "Elect_34.png", d: "æ’åº§", a: "å°ˆç”¨å–®æ’åº§" },
            { c: "E", img: "Elect_35.png", d: "è¨­å‚™", a: "å°ˆç”¨é›™æ’åº§" },
            { c: "E", img: "Elect_36.png", d: "è¨­å‚™", a: "é›»ç¶æ’åº§" },
            { c: "E", img: "Elect_37.png", d: "ç¬¦è™Ÿ", a: "é›»é˜å‡ºç·šå£" },
            { c: "E", img: "Elect_38.png", d: "ç¬¦è™Ÿ", a: "é¢¨æ‰‡å‡ºç·šå£" },
            { c: "E", img: "Elect_39.png", d: "é…é›»", a: "å‡ºå£æ¨™ç¤ºç‡ˆ" },
            { c: "E", img: "Elect_40.png", d: "é…é›»", a: "å†·æ°£æ©Ÿ" },
            { c: "E", img: "Elect_41.png", d: "è¨­å‚™", a: "é¿é›·é‡" },
            { c: "E", img: "Elect_42.png", d: "è¨­å‚™", a: "é¿é›·å™¨" },
            { c: "E", img: "Elect_43.png", d: "ç‡ˆå…·", a: "å–®åœ°æ¿æ’åº§" },
            { c: "E", img: "Elect_44.png", d: "ç‡ˆå…·", a: "é›™åœ°æ¿æ’åº§" },
            { c: "E", img: "Elect_45.png", d: "è¨­å‚™", a: "åœ°æ¿ç·šæ§½åœ°ç·šç›’" },

            // æ¶ˆé˜²è¨­å‚™ (Fire)
            { c: "FIRE", img: "Fire_01.png", d: "ç®¡ç·š", a: "æ¶ˆé˜²æ°´ç®¡" },
            { c: "FIRE", img: "Fire_02.png", d: "ç®¡ç·š", a: "æ¶ˆé˜²æ “ç®±" },
            { c: "FIRE", img: "Fire_03.png", d: "ç®¡ç·š", a: "æ¶ˆé˜²é€æ°´å£" },
            { c: "FIRE", img: "Fire_04.png", d: "ç®¡ç·š", a: "æ¸¬è©¦å‡ºæ°´å£" },
            { c: "FIRE", img: "Fire_05.png", d: "è¨­å‚™", a: "è‡ªå‹•è­¦å ±é€†æ­¢é–¥" },
            { c: "FIRE", img: "Fire_06.png", d: "è¨­å‚™", a: "æŸ¥é©—ç®¡" },
            { c: "FIRE", img: "Fire_07.png", d: "è¨­å‚™", a: "è‡ªå‹•ç‘æ°´é ­/æ„Ÿæ‡‰ç‘æ°´é ­" },
            { c: "FIRE", img: "Fire_08.png", d: "è¨­å‚™", a: "æ°´éœ§è‡ªå‹•ç‘æ°´é ­" },
            { c: "FIRE", img: "Fire_09.png", d: "è¨­å‚™", a: "æ³¡æ²«è‡ªå‹•ç‘æ°´é ­" },
            { c: "FIRE", img: "Fire_10.png", d: "è¨­å‚™", a: "è‡ªå‹•ç‘æ°´æ°´ç®¡" },
            { c: "FIRE", img: "Fire_11.png", d: "è¨­å‚™", a: "è‡ªå‹•ç‘æ°´é€æ°´å£" },
            { c: "FIRE", img: "Fire_12.png", d: "è¨­å‚™", a: "è‡ªå‹•ç‘æ°´å—ä¿¡ç¸½æ©Ÿ" },
            { c: "FIRE", img: "Fire_13.png", d: "è¨­å‚™", a: "ç«è­¦å—ä¿¡ç¸½æ©Ÿ" },
            { c: "FIRE", img: "Fire_14.png", d: "è¨­å‚™", a: "æ‰‹å‹•å ±è­¦æ©Ÿ" },
            { c: "FIRE", img: "Fire_15.png", d: "è¨­å‚™", a: "ç«è­¦è­¦éˆ´" },
            { c: "FIRE", img: "Fire_16.png", d: "è¨­å‚™", a: "å ±è­¦æ¨™ç¤ºç‡ˆ" },
            { c: "FIRE", img: "Fire_17.png", d: "è¨­å‚™", a: "ç¶œåˆç›¤" },
            { c: "FIRE", img: "Fire_18.png", d: "è¨­å‚™", a: "å®šæº«å‹ç«è­¦æ¢æ¸¬å™¨" },
            { c: "FIRE", img: "Fire_19.png", d: "è¨­å‚™", a: "å·®å‹•å‹ç«è­¦æ¢æ¸¬å™¨" },
            { c: "FIRE", img: "Fire_20.png", d: "è¨­å‚™", a: "åµç…™å‹ç«è­¦æ¢æ¸¬å™¨" },
            { c: "FIRE", img: "Fire_21.png", d: "è¨­å‚™", a: "ç·Šæ€¥é›»æºæ’åº§" },
            { c: "FIRE", img: "Fire_22.png", d: "è¨­å‚™", a: "ç«è­¦ç³»çµ±ç®¡ç·š" },
            { c: "FIRE", img: "Fire_23.png", d: "ä»£è™Ÿ", a: "è­¦å ±ç™¼ä¿¡å™¨" },
            { c: "FIRE", img: "Fire_24.png", d: "ä»£è™Ÿ", a: "æšè²å™¨" },
            { c: "FIRE", img: "Fire_25.png", d: "ä»£è™Ÿ", a: "æ’­éŸ³ç®¡ç·š" },
            { c: "FIRE", img: "Fire_26.png", d: "ä»£è™Ÿ", a: "å‡ºå£æ¨™ç¤ºç‡ˆ" },
            { c: "FIRE", img: "Fire_27.png", d: "ä»£è™Ÿ", a: "é¿é›£æ–¹å‘æŒ‡æ¨™" },
            { c: "FIRE", img: "Fire_28.png", d: "è¨­å‚™", a: "ç·Šæ€¥ç…§æ˜ç‡ˆ" },
            { c: "FIRE", img: "Fire_29.png", d: "è¨­å‚™", a: "æ’ç…™è¨­å‚™æ’ç…™å£" },
            { c: "FIRE", img: "Fire_30.png", d: "è¨­å‚™", a: "æ’ç…™è¨­å‚™é€²é¢¨å£" },
            { c: "FIRE", img: "Fire_31.png", d: "è¨­å‚™", a: "æ»…ç«å™¨" },

            // ç©ºèª¿æ©Ÿæ¢° (Mech)
            { c: "M", img: "Mech_01.png", d: "ç®¡ç·š", a: "å†·å»é€æ°´ç®¡(CWS)" },
            { c: "M", img: "Mech_02.png", d: "ç®¡ç·š", a: "å†·å»å›æ°´ç®¡(CWR)" },
            { c: "M", img: "Mech_03.png", d: "ç®¡ç·š", a: "å†°æ°´é€æ°´ç®¡(CHS)" },
            { c: "M", img: "Mech_04.png", d: "ç®¡ç·š", a: "å†°æ°´å›æ°´ç®¡(CHR)" },
            { c: "M", img: "Mech_05.png", d: "ç®¡ç·š", a: "å†·åª’é€å‡ºç®¡(RD)" },
            { c: "M", img: "Mech_06.png", d: "ç®¡ç·š", a: "å†·åª’å¸å…¥ç®¡(RS)" },
            { c: "M", img: "Mech_07.png", d: "ç®¡ç·š", a: "å†·åª’æ¶²ç®¡(RL)" },
            { c: "M", img: "Mech_08.png", d: "ç®¡ç·š", a: "æ’æ°´ç®¡(D)" },
            { c: "M", img: "Mech_09.png", d: "é¢¨ç®¡", a: "é¢¨ç®¡" },
            { c: "M", img: "Mech_10.png", d: "é¢¨ç®¡", a: "é¢¨ç®¡ä¸Šå½" },
            { c: "M", img: "Mech_11.png", d: "é–˜é–€", a: "é¢¨ç®¡ä¸‹å½" },
            { c: "M", img: "Mech_12.png", d: "é–˜é–€", a: "é¢¨é¤¨å…§è²¼æ¶ˆéŸ³å±¤" },
            { c: "M", img: "Mech_13.png", d: "é–˜é–€", a: "ä¼¸ç¸®æ¥é ­" },
            { c: "M", img: "Mech_14.png", d: "å‡ºé¢¨å£", a: "é †é¢¨ç‰‡" },
            { c: "M", img: "Mech_15.png", d: "å›é¢¨å£", a: "å°é¢¨ç‰‡" },
            { c: "M", img: "Mech_16.png", d: "æ¥é ­", a: "é¢¨ç®¡å‰–é¢æ­£å£“" },
            { c: "M", img: "Mech_17.png", d: "æ¥é ­", a: "é¢¨ç®¡å‰–é¢è² å£“" },
            { c: "M", img: "Mech_18.png", d: "è¨­å‚™", a: "é›»å‹•é–˜é–€" },
            { c: "M", img: "Mech_19.png", d: "è¨­å‚™", a: "é˜²ç«é–˜é–€" },
            { c: "M", img: "Mech_20.png", d: "è¨­å‚™", a: "åˆ†æ­§é–˜é–€" },
            { c: "M", img: "Mech_21.png", d: "è¨­å‚™", a: "æ‰‹å‹•é–˜é–€" },
            { c: "M", img: "Mech_22.png", d: "è¨­å‚™", a: "å¹³é ‚å‡ºé¢¨å£" },
            { c: "M", img: "Mech_23.png", d: "è¨­å‚™", a: "ç‰†ä¸Šå‡ºé¢¨å£" },
            { c: "M", img: "Mech_24.png", d: "è¨­å‚™", a: "å›é¢¨å£æˆ–æ’é¢¨å£" },
            { c: "M", img: "Mech_25.png", d: "è¨­å‚™", a: "é–€ä¸Šç™¾é " },
            { c: "M", img: "Mech_26.png", d: "è¨­å‚™", a: "è»Ÿç®¡" },

            // çµ¦æ’æ°´ (Pump)
            { c: "P", img: "Pump_01.png", d: "ç®¡ç·š", a: "æ’æ°´ç®¡(D)" },
            { c: "P", img: "Pump_02.png", d: "ç®¡ç·š", a: "é€šæ°£ç®¡" },
            { c: "P", img: "Pump_03.png", d: "ç®¡ç·š", a: "é›¨å¤©æ’æ°´ç®¡" },
            { c: "P", img: "Pump_04.png", d: "ç®¡ç·š", a: "é£²æ°´ç®¡" },
            { c: "P", img: "Pump_05.png", d: "ç®¡ç·š", a: "é£²æ°´å›æ°´ç®¡" },
            { c: "P", img: "Pump_06.png", d: "ç®¡ç·š", a: "å†·æ°´ç®¡(CW)" },
            { c: "P", img: "Pump_07.png", d: "ç®¡ç·š", a: "ç†±æ°´ç®¡(HW)" },
            { c: "P", img: "Pump_08.png", d: "ç®¡ç·š", a: "ç†±æ°´å›æ°´ç®¡" },
            { c: "P", img: "Pump_09.png", d: "é–¥é¡", a: "è’¸æ°£ç®¡" },
            { c: "P", img: "Pump_10.png", d: "é–¥é¡", a: "è’¸æ°£å‡æ°´ç®¡" },
            { c: "P", img: "Pump_11.png", d: "é–¥é¡", a: "ç“¦æ–¯ç®¡" },
            { c: "P", img: "Pump_12.png", d: "é–¥é¡", a: "å£“ç¸®ç©ºæ°£ç®¡" },
            { c: "P", img: "Pump_13.png", d: "é–¥é¡", a: "çœŸç©ºå¸æ°£ç®¡" },
            { c: "P", img: "Pump_14.png", d: "é–¥é¡", a: "æ°§æ°£ç®¡" },
            { c: "P", img: "Pump_15.png", d: "é–¥é¡", a: "æ°®æ°£ç®¡" },
            { c: "P", img: "Pump_16.png", d: "å„€è¡¨", a: "é€†æ­¢é–¥" },
            { c: "P", img: "Pump_17.png", d: "å„€è¡¨", a: "çƒå‹é–¥" },
            { c: "P", img: "Pump_18.png", d: "è¨­å‚™", a: "è¶é–¥" },
            { c: "P", img: "Pump_19.png", d: "è¨­å‚™", a: "åŒ£é–¥" },
            { c: "P", img: "Pump_20.png", d: "è¨­å‚™", a: "éæ¿¾å™¨" },
            { c: "P", img: "Pump_21.png", d: "è¡›æµ´", a: "å£“åŠ›éŒ¶" },
            { c: "P", img: "Pump_22.png", d: "è¡›æµ´", a: "æº«åº¦è¨ˆ" },
            { c: "P", img: "Pump_23.png", d: "è¡›æµ´", a: "æ§åˆ¶é–¥" },
            { c: "P", img: "Pump_24.png", d: "è¡›æµ´", a: "ç«‹ç®¡" },
            { c: "P", img: "Pump_25.png", d: "è¡›æµ´", a: "ä¸‹å½" },
            { c: "P", img: "Pump_26.png", d: "è¡›æµ´", a: "ä¸Šå½" },
            { c: "P", img: "Pump_27.png", d: "è¨­å‚™", a: "åœ°æ¿è½æ°´é ­" },
            { c: "P", img: "Pump_28.png", d: "è¨­å‚™", a: "æ¸…æ½”å£(åœ°æ¿é¢)" },
            { c: "P", img: "Pump_29.png", d: "è¨­å‚™", a: "æ¸…æ½”å£(åœ°æ¿ä¸‹)" },
            { c: "P", img: "Pump_30.png", d: "è¨­å‚™", a: "æ´—è‡‰ç›†" },
            { c: "P", img: "Pump_31.png", d: "è¨­å‚™", a: "æµ´ç¼¸" },
            { c: "P", img: "Pump_32.png", d: "é…ä»¶", a: "æ‹–å¸ƒç›†" },
            { c: "P", img: "Pump_33.png", d: "é…ä»¶", a: "äººå­”é™°äº•" },
            { c: "P", img: "Pump_34.png", d: "é…ä»¶", a: "è¹²å¼é¦¬æ¡¶" },
            { c: "P", img: "Pump_35.png", d: "é…ä»¶", a: "åå¼é¦¬æ¡¶" },
            { c: "P", img: "Pump_36.png", d: "é…ä»¶", a: "å°ä¾¿æ–—" },
            { c: "P", img: "Pump_37.png", d: "é…ä»¶", a: "è“®è“¬é ­" },
            { c: "P", img: "Pump_38.png", d: "é…ä»¶", a: "æ’æ±™ç®¡" },

            // æ§‹é€ æè³ª (Rock)
            { c: "MAT", img: "Rock_01.png", d: "ææ–™å‰–é¢", a: "ç£šç‰†" },
            { c: "MAT", img: "Rock_02.png", d: "ææ–™å‰–é¢", a: "æ··å‡åœŸ" },
            { c: "MAT", img: "Rock_03.png", d: "ææ–™å‰–é¢", a: "çŸ³æ" },
            { c: "MAT", img: "Rock_04.png", d: "ææ–™å‰–é¢", a: "ç²‰åˆ·é¡" },
            { c: "MAT", img: "Rock_05.png", d: "ææ–™å‰–é¢", a: "å¯¦ç¡¬ä¹‹ä¿æº«å¸éŸ³æ" },
            { c: "MAT", img: "Rock_06.png", d: "ææ–™å‰–é¢", a: "é‹¼éª¨" },
            { c: "MAT", img: "Rock_07.png", d: "ææ–™å‰–é¢", a: "æœ¨æ" },
            { c: "MAT", img: "Rock_08.png", d: "ææ–™å‰–é¢", a: "åˆæ¿" },
            { c: "MAT", img: "Rock_09.png", d: "ææ–™å‰–é¢", a: "åœŸå£¤ã€åœ°é¢" },
            { c: "MAT", img: "Rock_10.png", d: "ææ–™å‰–é¢", a: "ç´šé…" },
            { c: "MAT", img: "Rock_11.png", d: "ææ–™å‰–é¢", a: "é‹¼ç­‹æ··å‡åœŸ" },
            { c: "MAT", img: "Rock_12.png", d: "ææ–™å‰–é¢", a: "è¼•è³ªç‰†" },
            { c: "MAT", img: "Rock_13.png", d: "ææ–™å‰–é¢", a: "ç©ºå¿ƒç£šç‰†" },
            { c: "MAT", img: "Rock_14.png", d: "ææ–™å‰–é¢", a: "é¬†è»Ÿä¹‹ä¿æº«å¸éŸ³æç–Šè“†é¡" },
            { c: "MAT", img: "Rock_15.png", d: "ææ–™å‰–é¢", a: "ç¶²" },
            { c: "MAT", img: "Rock_16.png", d: "ææ–™å‰–é¢", a: "ç»ç’ƒ" },
            { c: "MAT", img: "Rock_17.png", d: "ææ–™å‰–é¢", a: "åµçŸ³" },

            // é›»ä¿¡å¼±é›» (Tele)
            { c: "T", img: "Tele_01.png", d: "ç®±é«”", a: "ç¸½é…ç·šç®±" },
            { c: "T", img: "Tele_02.png", d: "ç®±é«”", a: "ä¸»é…ç·šç®±" },
            { c: "T", img: "Tele_03.png", d: "ç®±é«”", a: "æ”¯é…ç·šç®±" },
            { c: "T", img: "Tele_04.png", d: "ç®±é«”", a: "åœ°æ¿å‹æš—å¼å‡ºç·šåŒ£" },
            { c: "T", img: "Tele_05.png", d: "å‡ºç·šåŒ£", a: "å£å‹æš—å¼å‡ºç·šåŒ£" },
            { c: "T", img: "Tele_06.png", d: "å‡ºç·šåŒ£", a: "å£å‹æš—å¼å…¬ç”¨é›»è©±å‡ºç·šåŒ£" },
            { c: "T", img: "Tele_07.png", d: "å‡ºç·šåŒ£", a: "æ‰å‹ç®¡é€£æ¥åŒ£" },
            { c: "T", img: "Tele_08.png", d: "è¨­å‚™", a: "é›»ä¿¡ç®¡ç·šæš—å¼" },
            { c: "T", img: "Tele_09.png", d: "è¨­å‚™", a: "é›»ä¿¡ç®¡ç·šæ˜å¼" },
            { c: "T", img: "Tele_10.png", d: "ç®¡ç·š", a: "é›»ä¿¡ç®¡ç·šæ‰å‹ç®¡" },
            { c: "T", img: "Tele_11.png", d: "ç®¡ç·š", a: "é›»ä¿¡ç®¡ç·šä¸Šè¡Œ" },
            { c: "T", img: "Tele_12.png", d: "è¨­å‚™", a: "é›»ä¿¡ç®¡ç·šä¸‹è¡Œ" },
            { c: "T", img: "Tele_13.png", d: "è¨­å‚™", a: "é›»ä¿¡ç®¡ç·šä¸Šä¸‹è¡Œ" },
            { c: "T", img: "Tele_14.png", d: "å‡ºç·šå£", a: "ç¸½(ä¸»)é…ç·šæ¶" },
            { c: "T", img: "Tele_15.png", d: "ç®¡ç·š", a: "æ‹–ç·šç®±" },
            { c: "T", img: "Tele_16.png", d: "å‡ºç·šå£", a: "é›»è©±æ©Ÿ" },
            { c: "T", img: "Tele_17.png", d: "è¨­å‚™", a: "å…¬ç”¨é›»è©±æ©Ÿ" },
            { c: "T", img: "Tele_18.png", d: "è¨­å‚™", a: "æ’åº§" },
            { c: "T", img: "Tele_19.png", d: "è¨­å‚™", a: "æ‰‹å­”" },
            { c: "T", img: "Tele_20.png", d: "è¨­å‚™", a: "æ¥åœ°" },
            { c: "T", img: "Tele_21.png", d: "è¨­å‚™", a: "ç¸½æ¥åœ°ç®±" },
            { c: "T", img: "Tele_22.png", d: "å‡ºç·šå£", a: "æ¥åœ°å°ç·š" },
            { c: "T", img: "Tele_23.png", d: "è¨­å‚™", a: "äººå­”" },
            { c: "T", img: "Tele_24.png", d: "è¨­å‚™", a: "é›»ä¿¡å®¤" },
            { c: "T", img: "Tele_25.png", d: "è¨­å‚™", a: "é›»æ¡¿" },
            { c: "T", img: "Tele_26.png", d: "è¨­å‚™", a: "æ‹‰ç·š" },
            { c: "T", img: "Tele_27.png", d: "è¨­å‚™", a: "RAç®±" },
            { c: "T", img: "Tele_28.png", d: "è¨­å‚™", a: "CCP-LAPè‡ªæŒè¡Œé›»çºœ" },
            { c: "T", img: "Tele_29.png", d: "è¨­å‚™", a: "FS-JF-LAPé›»çºœ" },
            { c: "T", img: "Tele_30.png", d: "ç®¡ç·š", a: "å°è¬›æ©Ÿå‡ºç·šå£" },
            { c: "T", img: "Tele_31.png", d: "è¨­å‚™", a: "æŒ‰éˆ•é–‹é—œ" },
            { c: "T", img: "Tele_32.png", d: "è¨­å‚™", a: "èœ‚é³´å™¨" },
            { c: "T", img: "Tele_33.png", d: "è¨­å‚™", a: "é›»éˆ´" },
            { c: "T", img: "Tele_34.png", d: "è¨­å‚™", a: "é›»è¦–å¤©ç·šå‡ºç·šå£" },
            { c: "T", img: "Tele_35.png", d: "è¨­å‚™", a: "é›»è¦–å¤©ç·šç”¨ç®¡ç·š" },
            { c: "T", img: "Tele_36.png", d: "è¨­å‚™", a: "å…±åŒå¤©ç·š" },
            { c: "T", img: "Tele_37.png", d: "è¨­å‚™", a: "é›»è¦–å¤©ç·š" },

            // é–€çª—å»ºç¯‰ (Windows)
            { c: "ARCH", img: "Windows_01.png", d: "ç·šå‹", a: "å‡ºå…¥å£æ–¹å‘" },
            { c: "ARCH", img: "Windows_02.png", d: "é–€åœ–ä¾‹", a: "é›™å‘é–€" },
            { c: "ARCH", img: "Windows_03.png", d: "é–€åœ–ä¾‹", a: "æŠ˜ç–Šé–€" },
            { c: "ARCH", img: "Windows_04.png", d: "é–€åœ–ä¾‹", a: "æ—‹è½‰é–€" },
            { c: "ARCH", img: "Windows_05.png", d: "çª—åœ–ä¾‹", a: "æ²é–€" },
            { c: "ARCH", img: "Windows_06.png", d: "çª—åœ–ä¾‹", a: "æ©«æ‹‰çª—" },
            { c: "ARCH", img: "Windows_07.png", d: "çª—åœ–ä¾‹", a: "ç´—çª—" },
            { c: "ARCH", img: "Windows_08.png", d: "çª—åœ–ä¾‹", a: "å›ºå®šçª—" },
            { c: "ARCH", img: "Windows_09.png", d: "çª—åœ–ä¾‹", a: "ä¸Šä¸‹æ‹‰çª—" },
            { c: "ARCH", img: "Windows_10.png", d: "é–€åœ–ä¾‹", a: "å–®é–‹çª—" },
            { c: "ARCH", img: "Windows_11.png", d: "é–€åœ–ä¾‹", a: "é›™é–‹çª—" },
            { c: "ARCH", img: "Windows_12.png", d: "é–€åœ–ä¾‹", a: "å–®æ‹‰é–€" },
            { c: "ARCH", img: "Windows_13.png", d: "é–€åœ–ä¾‹", a: "é›™æ‹‰é–€" },
            { c: "ARCH", img: "Windows_14.png", d: "é–€åœ–ä¾‹", a: "å–®é–‹é–€" },
            { c: "ARCH", img: "Windows_15.png", d: "é–€åœ–ä¾‹", a: "é›™é–‹é–€" },
            { c: "ARCH", img: "Windows_16.png", d: "æ¨“æ¢¯", a: "æ¨“æ¢¯" },
            { c: "ARCH", img: "Windows_17.png", d: "å‡é™æ©Ÿ", a: "é›»æ¢¯" },
            { c: "ARCH", img: "Windows_18.png", d: "å¡é“", a: "æ–œå¡é“" },
            { c: "ARCH", img: "Windows_19.png", d: "ä»£è™Ÿ", a: "æ™®é€šé–€(Dn)" },
            { c: "ARCH", img: "Windows_20.png", d: "é˜²ç«", a: "å…·ä¸€å°æ™‚é˜²ç«æ™‚æ•ˆåŠé˜»ç†±æ€§é˜²ç«é–€(60A)" },
            { c: "ARCH", img: "Windows_21.png", d: "é–€åœ–ä¾‹", a: "é˜²çˆ†é–€" },
            { c: "ARCH", img: "Windows_22.png", d: "é–€æ´", a: "æ™®é€šçª—" },
            { c: "ARCH", img: "Windows_23.png", d: "é–€åœ–ä¾‹", a: "å…·ä¸€å°æ™‚é˜²ç«æ™‚æ•ˆåŠåŠå°æ™‚é˜»ç†±æ€§é˜²ç«çª—" }
        ];

        const STORAGE_KEY = 'cns_quiz_state';
        const UNFAMILIAR_KEY = 'cns_quiz_unfamiliar';
        const grid = document.getElementById('quizGrid');
        const statsDiv = document.getElementById('stats');
        const searchInput = document.getElementById('searchInput');
        const buttons = document.querySelectorAll('.filter-group .btn:not(.btn-toggle)');

        function loadUnfamiliar() {
            try {
                const saved = localStorage.getItem(UNFAMILIAR_KEY);
                return saved ? JSON.parse(saved) : [];
            } catch (e) {
                return [];
            }
        }

        function saveUnfamiliar() {
            try {
                localStorage.setItem(UNFAMILIAR_KEY, JSON.stringify(unfamiliarList));
            } catch (e) { }
        }

        // å¾ localStorage è®€å–ä¸Šæ¬¡çš„ç‹€æ…‹
        function loadState() {
            try {
                const saved = localStorage.getItem(STORAGE_KEY);
                if (saved) {
                    return JSON.parse(saved);
                }
            } catch (e) {
                console.log('ç„¡æ³•è®€å–å„²å­˜ç‹€æ…‹');
            }
            return { filter: 'all' };
        }

        // å„²å­˜ç‹€æ…‹åˆ° localStorage
        function saveState() {
            try {
                localStorage.setItem(STORAGE_KEY, JSON.stringify({
                    filter: currentFilter
                }));
            } catch (e) {
                console.log('ç„¡æ³•å„²å­˜ç‹€æ…‹');
            }
        }

        const savedState = loadState();
        let currentFilter = savedState.filter;
        let isAllRevealed = false;
        let unfamiliarList = loadUnfamiliar();

        // åˆå§‹åŒ–æ™‚è¨­å®šæ­£ç¢ºçš„ active æŒ‰éˆ•
        buttons.forEach(btn => {
            if (btn.dataset.filter === currentFilter) {
                btn.classList.add('active');
            } else {
                btn.classList.remove('active');
            }
        });

        function getCatName(code) {
            const map = {
                'CNS': 'CNSåœ–è™Ÿ', 'ARCH': 'å»ºç¯‰ç¬¦è™Ÿ', 'STRUCT': 'çµæ§‹ç¬¦è™Ÿ',
                'MAT': 'æ§‹é€ æè³ª', 'E': 'é›»æ°£è¨­å‚™', 'P': 'çµ¦æ’æ°´',
                'M': 'ç©ºèª¿æ©Ÿæ¢°', 'T': 'é›»ä¿¡å¼±é›»', 'FIRE': 'æ¶ˆé˜²è¨­å‚™'
            };
            return map[code] || code;
        }

        window.toggleUnfamiliar = function (e, itemId) {
            e.stopPropagation();
            const index = unfamiliarList.indexOf(itemId);
            if (index > -1) {
                unfamiliarList.splice(index, 1);
                e.target.classList.remove('active');
            } else {
                unfamiliarList.push(itemId);
                e.target.classList.add('active');
            }
            saveUnfamiliar();
            // è‹¥ç›®å‰åœ¨ã€Œä¸ç†Ÿã€ç¯©é¸æ¨¡å¼ä¸”å–æ¶ˆæ‰“æ˜Ÿï¼Œç‚ºå…¼é¡§ä½¿ç”¨è€…é«”é©—ï¼Œä¸ç«‹åˆ»é‡ç¹ªä»¥å…å¡ç‰‡ç¬é–“æ¶ˆå¤±
        };

        function renderQuiz() {
            const searchTerm = searchInput.value.toLowerCase().trim();
            const filtered = db.filter(item => {
                const itemId = item.c + '|' + (item.q || item.img) + '|' + item.a;

                let matchFilter = false;
                if (currentFilter === 'all') {
                    matchFilter = true;
                } else if (currentFilter === 'unfamiliar') {
                    matchFilter = unfamiliarList.includes(itemId);
                } else {
                    matchFilter = item.c === currentFilter;
                }

                const matchSearch = item.a.toLowerCase().includes(searchTerm) ||
                    item.d.toLowerCase().includes(searchTerm) ||
                    (item.q && item.q.toLowerCase().includes(searchTerm));
                return matchFilter && matchSearch;
            });

            if (filtered.length === 0) {
                grid.innerHTML = '<div style="grid-column:1/-1;text-align:center;padding:30px;color:#999;">æ²’æœ‰æ‰¾åˆ°ç›¸ç¬¦çš„è³‡æ–™</div>';
            } else {
                grid.innerHTML = filtered.map(item => {
                    const itemId = item.c + '|' + (item.q || item.img) + '|' + item.a;
                    const isUnfamiliar = unfamiliarList.includes(itemId);
                    return `
            <div class="quiz-card ${isAllRevealed ? 'revealed' : ''}" onclick="this.classList.toggle('revealed')">
                <div class="card-header">
                    <span>${getCatName(item.c)} - ${item.d}</span>
                    <span class="star-btn ${isUnfamiliar ? 'active' : ''}" onclick="toggleUnfamiliar(event, '${itemId}')">â˜…</span>
                </div>
                <div class="card-body">
                    ${item.img ? `<img src="img_CNS/${item.img}" alt="ç¬¦è™Ÿ">` : `<span class="text-symbol">${item.q || ''}</span>`}
                </div>
                <div class="card-answer">${item.a}</div>
            </div>
        `}).join('');
            }
            statsDiv.textContent = `å…± ${db.length} é¡Œ / é¡¯ç¤º ${filtered.length} é¡Œ`;
        }

        window.toggleAll = function () {
            isAllRevealed = !isAllRevealed;
            document.querySelectorAll('.quiz-card').forEach(c =>
                isAllRevealed ? c.classList.add('revealed') : c.classList.remove('revealed'));
        };

        buttons.forEach(btn => {
            btn.addEventListener('click', () => {
                buttons.forEach(b => b.classList.remove('active'));
                btn.classList.add('active');
                currentFilter = btn.dataset.filter;
                saveState();  // å„²å­˜ç‹€æ…‹
                renderQuiz();
            });
        });

        searchInput.addEventListener('input', renderQuiz);
        renderQuiz();
    </script>
</body>


</html>